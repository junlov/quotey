{
  "id": "quotey-001",
  "title": "EPIC-V2-MCP: MCP Server for AI Agents",
  "status": "in_progress",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:00:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:00:00Z",
  "description": "## Overview\nMake Quotey controllable by AI coding agents via Model Context Protocol (MCP). AI agents can programmatically query pricing, create quotes, check approvals, and trigger document generation.\n\n## Why This Matters\nEvery other CPQ tool requires human interaction only. AI agents become internal users, enabling AI-powered quoting workflows. This is a critical differentiator - no competitor offers this. Opens new use cases: automated deal scoring, AI quote optimization, programmatic quote generation.\n\n## Background\nMCP is an open protocol enabling AI agents to connect to tools and services. By exposing Quotey via MCP, we enable Claude Code and other AI agents to create quotes programmatically, automated workflows from external systems, and integration with AI-powered CRM systems.\n\n## Technical Considerations\n- MCP server implementation in Rust (use existing MCP SDK or build custom)\n- Define tool schema for each Quotey capability following MCP conventions\n- Support API key and OAuth authentication\n- Handle rate limiting and error responses properly\n- Ensure idempotency for agent retries\n- Full audit trail for ALL agent actions (critical for enterprise)\n\n## Goals\n1. Agents can query product catalog programmatically\n2. Agents can create and price quotes\n3. Agents can check approval status and trigger approval flows\n4. Agents can trigger PDF generation\n5. Full audit trail exists for all agent actions\n\n## Dependencies\nNone - foundational capability, can start immediately\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #1]",
  "labels": [
    "v2",
    "mcp",
    "ai-agents",
    "epic",
    "foundational"
  ],
  "assigned_to": "Kimi"
}
{
  "id": "quotey-002",
  "title": "EPIC-V2-SUGGEST: Smart Product Suggestions Engine",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:01:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:01:00Z",
  "description": "## Overview\nAfter a rep selects a customer, the system automatically recommends products based on what similar customers bought, the customer's industry, their current contract, seasonal trends, and cross-sell/upsell opportunities. One-click to add.\n\n## Why This Matters\nReps spend too much time hunting through catalogs. This makes the system feel magical - it knows what the customer likely needs. Increases average deal size through intelligent cross-sell/upsell suggestions. Reduces training burden - reps don't need to memorize the entire catalog.\n\n## Background\nThis is a recommendation engine built on top of historical quote data. The system learns from past successful deals and applies that pattern to new opportunities. It's not about replacing human judgment - it's about surfacing relevant options quickly.\n\n## Technical Considerations\n- Similarity scoring algorithm based on: customer segment, industry, deal size, product categories\n- Collaborative filtering: \"customers like this also bought...\"\n- Content-based: product relationships, bundles, add-ons\n- Time-decay for seasonality (Q4 deals different from Q1)\n- Configurable suggestion rules (e.g., always suggest onboarding for Enterprise)\n- Privacy-aware: suggestions based on anonymized aggregate data, not individual customer data\n\n## User Experience\nWhen rep selects a customer, show 3-5 product suggestions with brief reasoning:\n- \"Based on Acme's industry (FinTech), we typically include SOC2 compliance add-on\"\n- \"Enterprise customers like Acme often add premium support in year 1\"\n- \"Similar mid-market deals included SSO (3 of last 5)\"\n\n## Goals\n1. Display 3-5 relevant product suggestions per customer\n2. Show reasoning for each suggestion\n3. One-click add to quote\n4. Learn from accepted/rejected suggestions (feedback loop)\n5. Configurable suggestion rules by segment\n\n## Dependencies\n- EPIC-V2-MCP (can be independent but suggestions enhance MCP tools)\n- Historical quote data (existing in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #2]",
  "labels": [
    "v2",
    "recommendations",
    "ux",
    "epic",
    "productivity"
  ]
}
{
  "id": "quotey-003",
  "title": "EPIC-V2-PORTAL: Web Quote Portal",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:02:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:02:00Z",
  "description": "## Overview\nA lightweight web UI alongside Slack - not a full dashboard, just a shareable link customers can view interactively, approve electronically (e-signature capture), and download PDFs from. Replaces clumsy PDF attachments with a modern experience.\n\n## Why This Matters\nPDFs are static and clumsy. Customers can't easily ask questions or approve. A web portal allows interactive quote exploration, shows pricing breakdowns, lets customers compare options, and captures explicit approval with timestamp. Complements Slack without replacing it - the quote lives in Slack, but the customer experience is web-native.\n\n## Background\nSales reps currently send PDFs via email which get lost in inboxes. Customers can't easily compare options or ask clarifications. This creates friction in the close process. A web portal solves this while maintaining the Slack-first workflow for reps.\n\n## Technical Considerations\n- Minimal web server (Axum in Rust, or embedded static files)\n- Shareable links with expiration (configurable, default 30 days)\n- No authentication required for customers (link-based access)\n- Optional: password protection for sensitive deals\n- Electronic signature capture (simple click-to-approve + timestamp)\n- Customer can add comments/questions on specific line items\n- Mobile-responsive design\n- All data served from local SQLite (no external dependencies)\n\n## User Experience\nRep clicks \"Share Link\" in Slack, system generates unique URL. Customer receives link, can:\n- View full quote with pricing breakdown\n- Compare different configuration options\n- Ask questions (goes back to rep via Slack)\n- Approve electronically (triggers workflow in Quotey)\n- Download PDF\n\n## Goals\n1. Generate secure shareable links for quotes\n2. Interactive quote viewer with pricing breakdown\n3. Customer can approve/reject with electronic signature\n4. Customer can comment on specific line items\n5. Links expire after configurable duration\n\n## Dependencies\n- PDF generation (exists in v1)\n- Slack integration (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #3]",
  "labels": [
    "v2",
    "portal",
    "ux",
    "epic",
    "multi-channel"
  ]
}
{
  "id": "quotey-004",
  "title": "EPIC-V2-RULES: Visual No-Code Rule Builder",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:03:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:03:00Z",
  "description": "## Overview\nA Slack modal or CLI tool that lets sales ops admins build pricing rules and constraints visually - dropdowns, condition builders, formula editors - without writing SQL. Exports directly to SQLite.\n\n## Why This Matters\nCurrent Quotey requires SQL knowledge to manage pricing rules and constraints. This limits who can make changes to developers only. Sales ops need to be able to adjust discount caps, add new pricing tiers, and modify constraints without waiting for engineering. Democratizes setup to the people who understand the business.\n\n## Background\nIn v1, pricing rules, constraints, and policies are stored in SQLite but require SQL to manage. This creates a bottleneck. A visual builder lets sales ops make changes quickly while ensuring data integrity.\n\n## Technical Considerations\n- Slack modal UI for rule building\n- Alternative: CLI interactive wizard\n- Condition builder: field selector â†’ operator â†’ value\n- Formula editor with variable picker\n- Preview what rule will look like in SQL\n- Validation: test rule against sample data before saving\n- Version control: changes tracked in audit log\n- Import/export rules as JSON (for backup/versioning)\n\n## Rule Types to Support\n1. Pricing rules (base prices, volume tiers, formulas)\n2. Discount policies (caps by segment, product, deal size)\n3. Constraint rules (requires, excludes, attribute constraints)\n4. Approval thresholds (by discount %, deal value, margin)\n\n## User Experience\nAdmin opens \"/quotey rules\" in Slack, selects rule type, fills in form:\n- Rule name: \"SMB Discount Cap\"\n- Condition: \"customer_segment = SMB AND deal_size < 10000\"\n- Action: \"max_discount = 10%\"\n- Preview shows affected quotes\n- Save creates/updates rule in SQLite\n\n## Goals\n1. Visual builder for pricing rules\n2. Visual builder for constraint rules\n3. Visual builder for discount policies\n4. Visual builder for approval thresholds\n5. Preview and test before save\n6. Audit trail of all changes\n\n## Dependencies\n- Slack integration (exists in v1)\n- SQLite schema for rules (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #4]",
  "labels": [
    "v2",
    "rules",
    "admin",
    "ux",
    "epic",
    "no-code"
  ]
}
{
  "id": "quotey-005",
  "title": "EPIC-V2-AUTOQUOTE: Auto-Quote from Email/RFP",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:04:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:04:00Z",
  "description": "## Overview\nDrop an email or paste an RFP text, and the system extracts requirements, maps them to products, identifies ambiguities that need clarification, and drafts a complete quote. Rep reviews and tweaks before sending.\n\n## Why This Matters\nThis is THE key differentiator. Reps spend hours manually parsing customer requests, RFPs, and emails to build quotes. This does it in seconds. The #1 blocker to CPQ adoption is data entry time - this eliminates it.\n\n## Background\nAlready planned in PROJECT.md as \"Quote Intelligence\" but needs emphasis. This feature takes unstructured input (email, RFP, Slack thread) and converts it to structured quote data using LLM extraction + product matching.\n\n## Technical Considerations\n- Email parser: extract requirements from plain text emails\n- RFP parser: more complex, multi-section document with tables\n- Slack thread parser: conversation history â†’ requirements\n- Product matching: fuzzy name matching + attribute mapping\n- Ambiguity detection: flag items that need human clarification\n- Draft builder: create quote in \"draft\" state for review\n- Confidence scoring: show how confident the system is\n\n## User Experience\nRep pastes RFP text into Slack:\n```\n/quote parse-rfp\n[PASTE RFP CONTENT]\n```\n\nSystem responds:\n```\nðŸ“‹ Draft Quote Created\n\nExtracted Requirements:\n- 150 user seats âœ“\n- SSO integration â†’ matched to \"SSO Add-on\" (95% confidence)\n- 24/7 support â†’ matched to \"Premium Support\" (98% confidence)\n- Annual billing â†’ understood\n- Need: clarification on \"enterprise tier\" - did they mean Pro or Enterprise plan?\n\n[ View Draft ] [ Edit ] [ Confirm ]\n```\n\n## Goals\n1. Parse email â†’ requirements\n2. Parse RFP â†’ requirements (with table support)\n3. Match requirements to products automatically\n4. Flag ambiguities for human clarification\n5. Draft quote creation for review\n6. Confidence scoring on matches\n\n## Dependencies\n- LLM integration (exists in v1)\n- Product catalog (exists in v1)\n- Quote creation flow (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #5]",
  "labels": [
    "v2",
    "intelligence",
    "rfp",
    "automation",
    "epic",
    "differentiation"
  ]
}
{
  "id": "quotey-006",
  "title": "EPIC-V2-ANOMALY: Pricing Anomaly Detection",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:05:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:05:00Z",
  "description": "## Overview\nBefore a quote finalizes, the system automatically flags unusual patterns: discount way above customer's historical average, margin below floor for the product category, configuration that's valid but unusual, price that differs significantly from similar deals.\n\n## Why This Matters\nCatches mistakes before they become problems. Sales reps will trust the system more because it catches errors. Reduces pricing errors that cost money. Provides early warning on unusual deals that might need extra scrutiny.\n\n## Background\nTraditional CPQ validates against rules but doesn't detect patterns. This adds ML-style anomaly detection (but deterministic, not actual ML) to surface unusual quotes for review.\n\n## Technical Considerations\n- Historical baseline: calculate average discount/margin per customer segment\n- Standard deviation alerts: flag quotes > 2 std dev from norm\n- Product combo detection: unusual product combinations\n- Price comparison: compare to similar deals (same products, segment, region)\n- Configurable thresholds: different segments can have different sensitivity\n- Alert UI: show flagged items with explanation\n- Override capability: rep can override with justification\n\n## Anomaly Types\n1. **Discount anomaly**: discount significantly higher than customer's history\n2. **Margin anomaly**: margin below floor for product category\n3. **Config anomaly**: valid but unusual configuration (e.g., huge quantity)\n4. **Price anomaly**: total significantly different from similar deals\n5. **Velocity anomaly**: quote created very quickly (might be automated gaming)\n\n## User Experience\nWhen rep tries to finalize quote:\n```\nâš ï¸ Quote flagged for review\n\n- Discount (18%) is 2.3x customer's average (7.8%)\n- Margin (52%) is below SaaS floor (60%)\n- First time ordering \"Onboarding\" add-on\n\n[ Override with Justification ] [ Adjust Quote ] [ View Similar Deals ]\n```\n\n## Goals\n1. Detect discount anomalies\n2. Detect margin anomalies\n3. Detect configuration anomalies\n4. Detect price anomalies\n5. Show reasoning for flags\n6. Allow override with justification\n7. Audit trail of overrides\n\n## Dependencies\n- Historical quote data (exists in v1)\n- Pricing engine (exists in v1)\n- Policy engine (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #6]",
  "labels": [
    "v2",
    "safety",
    "quality",
    "anomaly-detection",
    "epic"
  ]
}
{
  "id": "quotey-007",
  "title": "EPIC-V2-PDF: Branded PDF Templates + White-Label",
  "status": "open",
  "priority": 2,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:06:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:06:00Z",
  "description": "## Overview\nShip with 5 professional quote templates (executive summary, detailed line items, product comparison, renewal, compact) with customizable branding. Users upload logo, customize colors, set as defaults. White-label option for partners/resellers.\n\n## Why This Matters\nThe quote IS the product. It represents your company to the customer. Professional, branded quotes build trust. Different templates for different situations (executive summary for quick decisions, detailed for procurement).\n\n## Background\nv1 has basic PDF generation. This adds multiple templates and customization.\n\n## Technical Considerations\n- Template engine: Tera/Handlebars (already in use)\n- 5 templates:\n  1. Executive Summary: 1-page, high-level, for quick decisions\n  2. Detailed: full line items, all pricing breakdowns\n  3. Comparison: side-by-side product/price options\n  4. Renewal: shows currentâ†’proposed changes\n  5. Compact: minimal, for emails\n- Customization: logo upload, primary/secondary colors, company info\n- White-label: custom sender name/logo, remove Quotey branding\n- Template selection: default per quote type, overridable\n- PDF optimization: proper font embedding, vector graphics\n\n## User Experience\nAdmin goes to \"/quotey templates\" in Slack:\n- View current templates\n- Upload logo (drag & drop)\n- Set primary color (color picker)\n- Preview each template\n- Set defaults by quote type\n\nRep generating PDF:\n```\n[ Generate PDF (Executive Summary) ]\n[ Generate PDF (Detailed) ]\n[ Generate PDF (Comparison) ]\n[ Customize Template ]\n```\n\n## Goals\n1. 5 professional templates\n2. Logo upload and customization\n3. Color scheme customization\n4. Company info customization\n5. White-label option\n6. Default template per quote type\n7. PDF quality: proper fonts, vectors\n\n## Dependencies\n- PDF generation (exists in v1)\n- Template engine (exists in v1)\n- File upload (Slack - exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #7]",
  "labels": [
    "v2",
    "pdf",
    "templates",
    "branding",
    "epic"
  ]
}
{
  "id": "quotey-008",
  "title": "EPIC-V2-MOBILE: Mobile Approval App (PWA)",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:07:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:07:00Z",
  "description": "## Overview\nA minimal PWA (Progressive Web App) where managers see pending approval requests, view deal context (customer history, margin impact, competitive situation), and approve/reject with one tap. Works on iOS and Android.\n\n## Why This Matters\nDeals stall because managers aren't at their desks. They're in meetings, traveling, or working remotely. Mobile approvals unblock deals faster. The #1 cause of approval delays is \"manager wasn't at their computer.\"\n\n## Background\nv1 approvals happen in Slack. Mobile experience is poor. This adds a dedicated PWA that's optimized for mobile.\n\n## Technical Considerations\n- PWA: works on iOS Safari, Android Chrome\n- Push notifications: native notifications for new approvals\n- Offline support: view pending, cached data\n- Auth: same Slack OAuth, or simple magic link\n- UI: large touch targets, readable on small screens\n- Deal context: customer history, margin, competitive info\n- Quick actions: Approve, Reject, Need Info (asks rep questions)\n- Snooze: remind me later\n\n## User Experience\nManager receives push notification:\n\"ðŸ”” Approval Request: Acme Corp - $21,420 (15% discount)\"\n\nOpens PWA:\n```\nApproval Request\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nCustomer: Acme Corp\nDeal: $21,420/yr\nDiscount: 15% (exceeds 10% cap)\nMargin: 62%\n\nContext:\nâ€¢ 14 month customer, 98% utilization\nâ€¢ +50 seats expansion\nâ€¢ Competitor X offered 20% discount\n\n[ Approve ] [ Reject ] [ Need Info ]\n```\n\n## Goals\n1. PWA works on iOS and Android\n2. Push notifications for new approvals\n3. Full deal context on mobile\n4. One-tap approve/reject\n5. \"Need Info\" option\n6. Offline viewing\n7. Biometric auth option (FaceID/TouchID)\n\n## Dependencies\n- Slack integration (exists in v1)\n- Approval workflow (exists in v1)\n- Account/Deal data (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #8]",
  "labels": [
    "v2",
    "mobile",
    "approvals",
    "pwa",
    "epic",
    "unblocking"
  ]
}
{
  "id": "quotey-009",
  "title": "EPIC-V2-ANALYTICS: Built-in Analytics Dashboard",
  "status": "open",
  "priority": 2,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:08:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:08:00Z",
  "description": "## Overview\nNative dashboard showing: win rate by price range, average discount by rep/segment, quote-to-close velocity, margin trends, most-quoted products, approval bottleneck analysis. No external BI tool required.\n\n## Why This Matters\nSales leadership always asks \"how are we doing on pricing?\" Currently requires data team or manual analysis. This answers questions instantly. Shows pricing health at a glance. Identifies bottlenecks in approval process.\n\n## Background\nNot planned in v1. Adding native analytics on top of existing quote data.\n\n## Technical Considerations\n- Dashboard UI: charts, tables, filters\n- Metrics:\n  - Win rate by price range\n  - Average discount by rep/segment/region\n  - Quote-to-close velocity (days)\n  - Margin trends over time\n  - Most-quoted products\n  - Approval bottleneck analysis (who delays?)\n  - Discount distribution\n  - Deal size distribution\n- Filters: date range, segment, rep, product\n- Export: CSV download\n- Scheduling: weekly email digest option\n\n## Dashboard Sections\n\n### Pricing Health\n- Average discount by segment (bar chart)\n- Discount distribution (histogram)\n- Margin trends (line chart)\n\n### Velocity\n- Average quote-to-close by week (line chart)\n- Quotes in flight by age\n\n### Products\n- Most quoted products (table)\n- Bundle attach rate\n\n### Approvals\n- Approval turnaround time by approver\n- Bottleneck analysis\n- Auto-approval rate\n\n## User Experience\nRep opens \"/quotey analytics\" in Slack:\n```\nðŸ“Š Quotey Analytics\n\nPricing Health:\nâ€¢ Avg discount: 12% (â†‘ 2% from last month)\nâ€¢ Avg margin: 68%\n\nVelocity:\nâ€¢ Avg quote-to-close: 4.2 days\nâ€¢ 12 quotes in flight\n\nTop Products:\n1. Pro Plan (45%)\n2. SSO Add-on (28%)\n\n[ View Full Dashboard ]\n```\n\nOr open dedicated dashboard URL for full view.\n\n## Goals\n1. Pricing health metrics\n2. Velocity metrics\n3. Product analytics\n4. Approval analytics\n5. Filter by date/segment/rep\n6. Export to CSV\n7. Scheduled digests\n\n## Dependencies\n- Quote data (exists in v1)\n- Approval data (exists in v1)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #9]",
  "labels": [
    "v2",
    "analytics",
    "dashboard",
    "visibility",
    "epic"
  ]
}
{
  "id": "quotey-010",
  "title": "EPIC-V2-CRM: One-Click CRM Sync",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T11:09:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:09:00Z",
  "description": "## Overview\nBidirectional sync with Salesforce/HubSpot - quote status changes flow back to the CRM opportunity, deal amount updates automatically, customer data stays fresh. No manual re-entry. Single click to connect.\n\n## Why This Matters\nThe #1 friction point in CPQ is data entry. Reps quote in Quotey but then have to manually update Salesforce/HubSpot. This eliminates double data entry. Deal data is always current in both systems.\n\n## Background\nv1 has Composio integration stubbed. This makes it production-ready with one-click connect.\n\n## Technical Considerations\n- OAuth flow: one-click connect to Salesforce/HubSpot\n- Sync direction:\n  - Quotey â†’ CRM: quote created, status changed, finalized, approved\n  - CRM â†’ Quotey: account updated, opportunity stage changed\n- Field mapping: configurable mapping between Quotey and CRM fields\n- Conflict resolution: CRM wins or Quotey wins (configurable)\n- Sync frequency: real-time (webhooks) or batch (hourly)\n- Error handling: retry with backoff, alert on failure\n- Audit trail: log all sync actions\n\n## Sync Events\n\n### Quotey â†’ CRM\n- Quote created â†’ create opportunity line item\n- Quote finalized â†’ update opportunity amount, stage\n- Quote approved â†’ post to CRM\n- Quote rejected â†’ post to CRM\n- Quote expired â†’ update opportunity\n\n### CRM â†’ Quotey\n- Account updated â†’ sync to Quotey account\n- Opportunity stage changed â†’ update quote context\n- Contact added â†’ sync to Quotey contacts\n\n## User Experience\nInitial setup:\n```\n/quotey crm connect\n\nSelect CRM:\n[ Salesforce ] [ HubSpot ]\n\nâ†’ Redirects to OAuth\nâ†’ Returns with connection confirmed\n\n[ Configure Field Mapping ] [ Done ]\n```\n\nOngoing:\n```\nQuote Q-2026-0042 finalized.\nâ†’ Syncing to Salesforce...\nâ†’ âœ“ Opportunity updated (amount: $20,400)\nâ†’ âœ“ Line items synced\n```\n\n## Goals\n1. One-click OAuth connect to Salesforce\n2. One-click OAuth connect to HubSpot\n3. Bidirectional quote sync\n4. Configurable field mapping\n5. Real-time sync via webhooks\n6. Batch sync fallback\n7. Error handling with retry\n8. Full sync audit trail\n\n## Dependencies\n- Composio integration (v1 has stub)\n- OAuth handling\n- Slack integration (for status messages)\n\n[Created from: ultrathink feature ideation - TOP 10 IDEA #10]",
  "labels": [
    "v2",
    "crm",
    "integration",
    "sync",
    "epic",
    "productivity"
  ]
}
{
  "id": "quotey-001-1",
  "title": "TASK: Research MCP protocol and existing SDKs",
  "status": "closed",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:10:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:10:00Z",
  "parent": "quotey-001",
  "description": "## Overview\nResearch Model Context Protocol specification, existing SDKs, and how other projects implement MCP servers. Determine best approach for Quotey.\n\n## Why This Matters\nNeed to understand the protocol before implementing. Avoid reinventing wheel by using existing libraries. Ensure approach aligns with MCP conventions for compatibility.\n\n## Tasks\n- Read MCP protocol specification\n- Find existing MCP server implementations (reference implementations)\n- Evaluate Rust MCP SDKs (if any)\n- Document findings and recommendation\n\n## Output\nTechnical recommendation document with:\n- Protocol overview\n- Recommended implementation approach\n- Estimated complexity\n- Dependencies needed\n\n[Created from: ultrathink - EPIC-V2-MCP subtask]",
  "labels": [
    "v2",
    "mcp",
    "research"
  ],
  "resolution": "completed",
  "assigned_to": "Kimi"
}
{
  "id": "quotey-001-2",
  "title": "TASK: Define MCP tool schema for Quotey",
  "status": "closed",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:11:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:11:00Z",
  "parent": "quotey-001",
  "description": "## Overview\nDefine the MCP tool schema - what tools/actions Quotey exposes to AI agents.\n\n## Why This Matters\nThe schema defines the contract between Quotey and AI agents. Must be comprehensive yet simple. Each tool needs clear inputs/outputs.\n\n## Tools to Define\n1. `catalog.search(query)` - Search products\n2. `catalog.get(product_id)` - Get product details\n3. `quote.create(customer_id, lines)` - Create new quote\n4. `quote.get(quote_id)` - Get quote details\n5. `quote.price(quote_id)` - Price a quote\n6. `quote.approve(quote_id)` - Request approval\n7. `quote.status(quote_id)` - Get approval status\n8. `quote.pdf(quote_id)` - Generate PDF\n9. `quote.list(filters)` - List quotes\n10. `approval.pending()` - Get pending approvals\n\n## Output\nJSON schema document for each tool with:\n- Tool name and description\n- Input parameters and types\n- Output format\n- Error cases\n\n[Created from: ultrathink - EPIC-V2-MCP subtask]",
  "labels": [
    "v2",
    "mcp",
    "schema",
    "api"
  ],
  "resolution": "completed",
  "assigned_to": "Kimi"
}
{
  "id": "quotey-001-3",
  "title": "TASK: Implement MCP server in Rust",
  "status": "closed",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:12:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T12:00:00Z",
  "parent": "quotey-001",
  "description": "## Overview\nImplement the MCP server that exposes Quotey capabilities to AI agents.\n\n## Why This Matters\nCore implementation of the MCP integration. Connects MCP protocol to existing Quotey functionality.\n\n## Implementation Details\n- Create new crate or module: `quotey-mcp`\n- Implement MCP protocol handler\n- Wire up each tool to existing Quotey functions\n- Add authentication (API key)\n- Add rate limiting\n- Add logging/audit\n\n## Technical Notes\n- Use existing Quotey functions (don't duplicate logic)\n- Ensure idempotency for retries\n- Handle errors gracefully with meaningful messages\n- Full audit trail for compliance\n\n[Created from: ultrathink - EPIC-V2-MCP subtask]",
  "labels": [
    "v2",
    "mcp",
    "implementation",
    "rust"
  ],
  "resolution": "completed",
  "completed_at": "2026-02-26T12:00:00Z",
  "assigned_to": "Kimi"
}
{
  "id": "quotey-001-4",
  "title": "TASK: Add MCP authentication and rate limiting",
  "status": "in_progress",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:13:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T12:05:00Z",
  "parent": "quotey-001",
  "description": "## Overview\nAdd authentication (API key) and rate limiting to MCP server.\n\n## Why This Matters\nEnterprise requirements. Prevent abuse. Ensure fair usage.\n\n## Authentication\n- API key header validation\n- Configurable in quotey.toml\n- Key rotation support\n\n## Rate Limiting\n- Per-key rate limits\n- Configurable limits (requests/minute)\n- 429 response with retry-after\n\n[Created from: ultrathink - EPIC-V2-MCP subtask]",
  "labels": [
    "v2",
    "mcp",
    "security",
    "auth"
  ],
  "assigned_to": "Kimi"
}
{
  "id": "quotey-001-5",
  "title": "TASK: Test MCP server with AI agents",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:14:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:14:00Z",
  "parent": "quotey-001",
  "description": "## Overview\nTest MCP server integration with Claude Code and other AI agents.\n\n## Why This Matters\nVerify it works with real agents. Document usage. Fix issues found.\n\n## Test Cases\n1. Claude Code queries product catalog\n2. Claude Code creates and prices a quote\n3. Claude Code checks approval status\n4. Claude Code triggers PDF generation\n5. Verify audit trail completeness\n\n[Created from: ultrathink - EPIC-V2-MCP subtask]",
  "labels": [
    "v2",
    "mcp",
    "testing",
    "qa"
  ]
}
{
  "id": "quotey-002-1",
  "title": "TASK: Design similarity scoring algorithm",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:15:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:15:00Z",
  "parent": "quotey-002",
  "description": "## Overview\nDesign the algorithm that determines which products to suggest for a customer.\n\n## Why This Matters\nThe core of the recommendation engine. Must balance relevance with diversity. Should be explainable.\n\n## Algorithm Components\n1. **Customer similarity**: Find similar customers (segment, industry, size)\n2. **Purchase patterns**: What did similar customers buy?\n3. **Product relationships**: Bundles, add-ons, replacements\n4. **Time factors**: Seasonal trends, recent popularity\n5. **Business rules**: Always suggest X for segment Y\n\n## Scoring Formula\n```\nscore = (similar_customer_buy * 0.4) +\n        (product_relationship * 0.3) +\n        (time_decay * 0.2) +\n        (business_rule_boost * 0.1)\n```\n\n## Output\nAlgorithm design doc with:\n- Component definitions\n- Scoring formula\n- Weight rationale\n- Examples\n\n[Created from: ultrathink - EPIC-V2-SUGGEST subtask]",
  "labels": [
    "v2",
    "recommendations",
    "algorithm",
    "design"
  ]
}
{
  "id": "quotey-002-2",
  "title": "TASK: Implement product suggestion engine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:16:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:16:00Z",
  "parent": "quotey-002",
  "description": "## Overview\nImplement the suggestion engine that generates product recommendations.\n\n## Why This Matters\nCore implementation. Connects algorithm to data and exposes suggestions via API.\n\n## Implementation\n- Create `suggestions` module\n- Implement similarity scoring\n- Implement product relationship lookup\n- Implement time-decay factors\n- Cache suggestions (refresh hourly)\n\n## API\n```rust\npub async fn get_suggestions(\n    customer_id: &str,\n    context: &QuoteContext,\n) -> Vec<ProductSuggestion>;\n```\n\n[Created from: ultrathink - EPIC-V2-SUGGEST subtask]",
  "labels": [
    "v2",
    "recommendations",
    "implementation",
    "engine"
  ]
}
{
  "id": "quotey-002-3",
  "title": "TASK: Add suggestion UI to Slack",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:17:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:17:00Z",
  "parent": "quotey-002",
  "description": "## Overview\nAdd suggestion display to Slack - show suggestions when rep selects customer.\n\n## Why This Matters\nUser-facing feature. Makes suggestions visible and actionable.\n\n## UI Design\n```\nðŸ’¡ Suggestions for Acme Corp\n\n1. Premium Support (85% match)\n   \"Enterprise customers typically add in year 1\"\n   [ Add to Quote ]\n\n2. SSO Add-on (72% match)\n   \"3 of 5 similar FinTech customers added\"\n   [ Add to Quote ]\n\n3. Onboarding Package (65% match)\n   \"Recommended for 150+ seats\"\n   [ Add to Quote ]\n```\n\n[Created from: ultrathink - EPIC-V2-SUGGEST subtask]",
  "labels": [
    "v2",
    "recommendations",
    "slack",
    "ui"
  ]
}
{
  "id": "quotey-002-4",
  "title": "TASK: Add feedback loop for suggestions",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:18:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:18:00Z",
  "parent": "quotey-002",
  "description": "## Overview\nTrack which suggestions are accepted/rejected to improve algorithm over time.\n\n## Why This Matters\nContinuous improvement. The system gets better as it learns from user behavior.\n\n## Feedback to Track\n- Suggestion shown\n- Clicked (viewed details)\n- Added to quote\n- Rejected/hidden\n\n## Updates\n- Re-score products based on feedback\n- Adjust weights over time\n- A/B test different algorithms\n\n[Created from: ultrathink - EPIC-V2-SUGGEST subtask]",
  "labels": [
    "v2",
    "recommendations",
    "feedback",
    "improvement"
  ]
}
{
  "id": "quotey-003-1",
  "title": "TASK: Design web portal architecture",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:19:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:19:00Z",
  "parent": "quotey-003",
  "description": "## Overview\nDesign the web portal architecture - how it serves quotes and handles customer interactions.\n\n## Why This Matters\nTechnical foundation. Need to decide on server approach, URL scheme, security model.\n\n## Architecture Options\n1. **Embedded**: Serve static HTML/JS from Quotey binary\n2. **Separate**: Standalone web service\n3. **Hybrid**: Embedded with optional external server\n\n## Decision: Embedded\n- Serve from Quotey binary (Axum)\n- Single binary deployment\n- No separate infrastructure\n- Customer URLs: http://rep-machine:3847/quote/abc123\n\n## URL Structure\n- `/quote/{token}` - View quote\n- `/quote/{token}/approve` - Approve\n- `/quote/{token}/reject` - Reject\n- `/quote/{token}/comment` - Add comment\n\n## Security\n- Token-based access (no auth)\n- Tokens expire (configurable)\n- Optional password for sensitive deals\n- Rate limiting\n\n[Created from: ultrathink - EPIC-V2-PORTAL subtask]",
  "labels": [
    "v2",
    "portal",
    "architecture",
    "design"
  ]
}
{
  "id": "quotey-003-2",
  "title": "TASK: Implement quote viewer page",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:20:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:20:00Z",
  "parent": "quotey-003",
  "description": "## Overview\nImplement the main quote viewer page - the page customers see when they open the link.\n\n## Why This Matters\nCore user experience. Must be clear, professional, and interactive.\n\n## Features\n- Quote header (company, quote number, date)\n- Customer info\n- Line items table with pricing\n- Totals section\n- Download PDF button\n- Approve/Reject buttons\n- Comments section\n\n## UI Requirements\n- Mobile responsive\n- Fast loading\n- Professional design\n- Accessible (WCAG)\n\n[Created from: ultrathink - EPIC-V2-PORTAL subtask]",
  "labels": [
    "v2",
    "portal",
    "ui",
    "implementation"
  ]
}
{
  "id": "quotey-003-3",
  "title": "TASK: Implement electronic approval capture",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:21:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:21:00Z",
  "parent": "quotey-003",
  "description": "## Overview\nImplement electronic approval - customer clicks to approve/reject with timestamp.\n\n## Why This Matters\nKey feature. Captures explicit approval for audit trail.\n\n## Approval Flow\n1. Customer clicks \"Approve\"\n2. Modal appears with summary\n3. Customer confirms\n4. Timestamp recorded\n5. Quotey notified\n6. Slack message to rep\n\n## Data Captured\n- Approver name (from form)\n- Approver email\n- Timestamp (UTC)\n- IP address (for audit)\n- Quote version approved\n\n[Created from: ultrathink - EPIC-V2-PORTAL subtask]",
  "labels": [
    "v2",
    "portal",
    "approval",
    "implementation"
  ]
}
{
  "id": "quotey-003-4",
  "title": "TASK: Add comment functionality",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:22:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:22:00Z",
  "parent": "quotey-003",
  "description": "## Overview\nAllow customers to add comments on specific line items or overall quote.\n\n## Why This Matters\nEnables clarification. Customer can ask questions without emailing rep.\n\n## Implementation\n- Comment form on each line item\n- Overall quote comments\n- Notifications to rep in Slack\n- Threaded replies\n\n[Created from: ultrathink - EPIC-V2-PORTAL subtask]",
  "labels": [
    "v2",
    "portal",
    "comments",
    "implementation"
  ]
}
{
  "id": "quotey-003-5",
  "title": "TASK: Implement link management and expiration",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:23:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:23:00Z",
  "parent": "quotey-003",
  "description": "## Overview\nManage shareable links - generation, expiration, revocation.\n\n## Why This Matters\nSecurity. Links shouldn't work forever.\n\n## Features\n- Generate unique tokens\n- Configurable expiration (default 30 days)\n- Manual revocation\n- View active links\n- Regenerate link (invalidates old)\n\n[Created from: ultrathink - EPIC-V2-PORTAL subtask]",
  "labels": [
    "v2",
    "portal",
    "security",
    "links"
  ]
}
{
  "id": "quotey-004-1",
  "title": "TASK: Design rule builder UI schema",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:24:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:24:00Z",
  "parent": "quotey-004",
  "description": "## Overview\nDesign the data schema for visual rule building - how rules are represented.\n\n## Why This Matters\nFoundation for builder UI. Must support all rule types and be serializable to SQLite.\n\n## Schema Design\n```rust\nstruct VisualRule {\n    name: String,\n    rule_type: RuleType, // pricing, constraint, policy, threshold\n    conditions: Vec<Condition>,\n    actions: Vec<Action>,\n    metadata: RuleMetadata,\n}\n\nstruct Condition {\n    field: String,\n    operator: Operator, // equals, not_equals, greater_than, etc.\n    value: serde_json::Value,\n    connector: Option<Connector>, // and, or\n}\n\nstruct Action {\n    action_type: ActionType,\n    parameters: HashMap<String, serde_json::Value>,\n}\n```\n\n[Created from: ultrathink - EPIC-V2-RULES subtask]",
  "labels": [
    "v2",
    "rules",
    "schema",
    "design"
  ]
}
{
  "id": "quotey-004-2",
  "title": "TASK: Implement pricing rule builder",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:25:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:25:00Z",
  "parent": "quotey-004",
  "description": "## Overview\nBuild the visual UI for creating pricing rules in Slack modals.\n\n## Why This Matters\nCore feature. Allows non-technical users to create pricing rules.\n\n## UI Flow\n1. Select rule type: \"Pricing Rule\"\n2. Enter name and description\n3. Add conditions (field â†’ operator â†’ value)\n4. Add action (set price, apply discount, etc.)\n5. Preview SQL generated\n6. Test with sample data\n7. Save to SQLite\n\n## Condition Builder\n```\nIF [customer_segment] [equals] [Enterprise]\nAND [region] [equals] [US]\nTHEN [base_price] [=] [$10.00]\n```\n\n[Created from: ultrathink - EPIC-V2-RULES subtask]",
  "labels": [
    "v2",
    "rules",
    "ui",
    "pricing"
  ]
}
{
  "id": "quotey-004-3",
  "title": "TASK: Implement constraint rule builder",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:26:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:26:00Z",
  "parent": "quotey-004",
  "description": "## Overview\nBuild the visual UI for creating constraint rules (requires, excludes, etc.).\n\n## Why This Matters\nEnables sales ops to manage product constraints without SQL.\n\n## Constraint Types\n- Requires: Product A requires Product B\n- Excludes: Product A excludes Product B\n- Attribute: Must satisfy condition\n- Quantity: Min/max quantities\n\n## UI Example\n```\nConstraint: SSO Add-on\nType: [Requires]\nTarget: [Enterprise Plan]\nMessage: \"SSO requires Enterprise tier\"\n```\n\n[Created from: ultrathink - EPIC-V2-RULES subtask]",
  "labels": [
    "v2",
    "rules",
    "ui",
    "constraints"
  ]
}
{
  "id": "quotey-004-4",
  "title": "TASK: Implement discount policy builder",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:27:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:27:00Z",
  "parent": "quotey-004",
  "description": "## Overview\nBuild the visual UI for creating discount policies.\n\n## Why This Matters\nCritical for deal desk. Controls how much discount is allowed without approval.\n\n## Policy Fields\n- Customer segment\n- Product category\n- Max discount (auto-approve)\n- Max discount (with approval)\n- Required approver role\n- Deal size filters\n\n[Created from: ultrathink - EPIC-V2-RULES subtask]",
  "labels": [
    "v2",
    "rules",
    "ui",
    "discount"
  ]
}
{
  "id": "quotey-004-5",
  "title": "TASK: Add rule preview and testing",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:28:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:28:00Z",
  "parent": "quotey-004",
  "description": "## Overview\nAllow admins to preview what a rule will do and test it against sample data before saving.\n\n## Why This Matters\nSafety. Don't let bad rules break production quotes.\n\n## Features\n- Show generated SQL\n- Run against sample quotes\n- Highlight affected quotes\n- Show before/after pricing\n\n[Created from: ultrathink - EPIC-V2-RULES subtask]",
  "labels": [
    "v2",
    "rules",
    "testing",
    "preview"
  ]
}
{
  "id": "quotey-005-1",
  "title": "TASK: Design requirement extraction prompt",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:29:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:29:00Z",
  "parent": "quotey-005",
  "description": "## Overview\nDesign the LLM prompt that extracts structured requirements from unstructured text.\n\n## Why This Matters\nCore of the auto-quote feature. Prompt quality determines extraction accuracy.\n\n## Prompt Requirements\n- Extract: products, quantities, features, billing preferences\n- Identify ambiguities\n- Confidence scoring\n- Return structured JSON\n\n## Output Format\n```json\n{\n  \"requirements\": [\n    {\n      \"type\": \"product\",\n      \"name\": \"Pro Plan\",\n      \"quantity\": 150,\n      \"confidence\": 0.95\n    }\n  ],\n  \"ambiguities\": [\n    {\n      \"text\": \"enterprise tier\",\n      \"question\": \"Did you mean Pro or Enterprise?\",\n      \"options\": [\"Pro Plan\", \"Enterprise Plan\"]\n    }\n  ],\n  \"missing_info\": [\"start date\"]\n}\n```\n\n[Created from: ultrathink - EPIC-V2-AUTOQUOTE subtask]",
  "labels": [
    "v2",
    "autoquote",
    "llm",
    "prompts"
  ]
}
{
  "id": "quotey-005-2",
  "title": "TASK: Implement email parser",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:30:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:30:00Z",
  "parent": "quotey-005",
  "description": "## Overview\nParse plain text emails to extract quote requirements.\n\n## Why This Matters\nCommon use case. Reps forward emails from customers asking for quotes.\n\n## Implementation\n- Use LLM for extraction (not regex)\n- Handle various email formats\n- Extract products, quantities, dates\n- Identify sender and context\n\n## Slack Command\n```\n/quote parse-email\n[forward email content]\n```\n\n[Created from: ultrathink - EPIC-V2-AUTOQUOTE subtask]",
  "labels": [
    "v2",
    "autoquote",
    "parser",
    "email"
  ]
}
{
  "id": "quotey-005-3",
  "title": "TASK: Implement RFP parser",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:31:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:31:00Z",
  "parent": "quotey-005",
  "description": "## Overview\nParse RFP documents to extract comprehensive quote requirements.\n\n## Why This Matters\nHigh-value feature. RFPs are complex and time-consuming to parse manually.\n\n## Complexity\n- Multiple sections (requirements, terms, evaluation)\n- Tables and lists\n- Quantities and specifications\n- Required vs optional features\n- Compliance requirements\n\n## Implementation\n- LLM with special prompting for RFPs\n- Table parsing\n- Section identification\n- Requirement categorization\n\n## Slack Command\n```\n/quote parse-rfp\n[paste RFP content or attach PDF]\n```\n\n[Created from: ultrathink - EPIC-V2-AUTOQUOTE subtask]",
  "labels": [
    "v2",
    "autoquote",
    "parser",
    "rfp"
  ]
}
{
  "id": "quotey-005-4",
  "title": "TASK: Implement product matcher",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:32:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:32:00Z",
  "parent": "quotey-005",
  "description": "## Overview\nMatch extracted requirements to actual products in the catalog.\n\n## Why This Matters\nCore linking. Requirements â†’ products = draft quote.\n\n## Matching Logic\n1. Fuzzy name matching\n2. Synonym handling\n3. Attribute mapping\n4. Confidence scoring\n5. Ambiguity detection\n\n## Example\n- Extracted: \"SSO integration\"\n- Matched: \"SSO Add-on\" (95% confidence)\n- Alternative: \"Enterprise SSO\" (78%)\n\n[Created from: ultrathink - EPIC-V2-AUTOQUOTE subtask]",
  "labels": [
    "v2",
    "autoquote",
    "matching",
    "products"
  ]
}
{
  "id": "quotey-005-5",
  "title": "TASK: Implement draft quote builder",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:33:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:33:00Z",
  "parent": "quotey-005",
  "description": "## Overview\nCreate draft quote from matched products and extracted requirements.\n\n## Why This Matters\nCompletes the flow. Matched products â†’ quoted = draft.\n\n## Draft Creation\n- Create quote in \"draft\" state\n- Add matched products as lines\n- Apply default quantities\n- Set status to needs_review\n- Present to rep for confirmation\n\n[Created from: ultrathink - EPIC-V2-AUTOQUOTE subtask]",
  "labels": [
    "v2",
    "autoquote",
    "draft",
    "implementation"
  ]
}
{
  "id": "quotey-006-1",
  "title": "TASK: Define anomaly detection rules",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:34:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:34:00Z",
  "parent": "quotey-006",
  "description": "## Overview\nDefine the specific anomaly detection rules and thresholds.\n\n## Why This Matters\nFoundation. What constitutes an anomaly?\n\n## Anomaly Types & Rules\n\n### Discount Anomaly\n- Flag if: discount > 2 * customer_avg + 1 std_dev\n- Warning threshold: 1.5 * avg\n- Critical threshold: 3 * avg\n\n### Margin Anomaly\n- Flag if: margin < product_category_floor\n- Warning: floor + 5%\n- Critical: below floor\n\n### Config Anomaly\n- Flag if: quantity > 3 * customer_avg\n- Flag if: new product (first time ordered)\n\n### Price Anomaly\n- Flag if: total > 1.5 * similar_deals_avg\n- Similar = same products + segment + region\n\n[Created from: ultrathink - EPIC-V2-ANOMALY subtask]",
  "labels": [
    "v2",
    "anomaly",
    "rules",
    "design"
  ]
}
{
  "id": "quotey-006-2",
  "title": "TASK: Implement anomaly detection engine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:35:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:35:00Z",
  "parent": "quotey-006",
  "description": "## Overview\nImplement the engine that evaluates quotes against anomaly rules.\n\n## Why This Matters\nCore implementation. Runs on every quote before finalization.\n\n## Implementation\n- Create `anomaly` module\n- Calculate historical baselines\n- Run each rule\n- Return flagged items with severity\n- Cache baselines (refresh daily)\n\n## API\n```rust\npub async fn detect_anomalies(\n    quote: &Quote,\n) -> Vec<AnomalyFlag>;\n```\n\n[Created from: ultrathink - EPIC-V2-ANOMALY subtask]",
  "labels": [
    "v2",
    "anomaly",
    "implementation",
    "engine"
  ]
}
{
  "id": "quotey-006-3",
  "title": "TASK: Add anomaly UI to quote flow",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:36:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:36:00Z",
  "parent": "quotey-006",
  "description": "## Overview\nIntegrate anomaly detection into quote finalization flow.\n\n## Why This Matters\nUser-facing. Makes anomalies visible and actionable.\n\n## Flow\n1. Rep clicks \"Finalize Quote\"\n2. System runs anomaly detection\n3. If anomalies found â†’ show warning modal\n4. Rep can override or adjust\n5. Override requires justification\n\n## UI\n```\nâš ï¸ Quote flagged for review\n\nâ€¢ Discount (18%) is 2.3x your average\nâ€¢ Margin (52%) below SaaS floor (60%)\n\n[ Override ] [ Adjust Quote ]\n```\n\n[Created from: ultrathink - EPIC-V2-ANOMALY subtask]",
  "labels": [
    "v2",
    "anomaly",
    "ui",
    "slack"
  ]
}
{
  "id": "quotey-006-4",
  "title": "TASK: Add override with justification",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:37:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:37:00Z",
  "parent": "quotey-006",
  "description": "## Overview\nAllow reps to override anomaly flags with justification.\n\n## Why This Matters\nFlexibility. Not all anomalies are bad.\n\n## Implementation\n- Require text justification\n- Log override in audit\n- Notify manager of override\n- Track override rate by rep\n\n[Created from: ultrathink - EPIC-V2-ANOMALY subtask]",
  "labels": [
    "v2",
    "anomaly",
    "override",
    "audit"
  ]
}
{
  "id": "quotey-007-1",
  "title": "TASK: Design 5 quote templates",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:38:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:38:00Z",
  "parent": "quotey-007",
  "description": "## Overview\nDesign 5 distinct quote templates for different use cases.\n\n## Why This Matters\nCore content. Templates define the PDF output.\n\n## Templates\n\n### 1. Executive Summary\n- 1 page max\n- High-level: customer, total, term\n- Key line items only (top 3)\n- For: quick decisions, executive review\n\n### 2. Detailed\n- Full line items\n- All pricing breakdowns\n- Terms and conditions\n- For: procurement, legal review\n\n### 3. Comparison\n- Side-by-side product/price options\n- Option A vs Option B\n- For: multi-choice situations\n\n### 4. Renewal\n- Current vs proposed side-by-side\n- Change highlighting\n- For: renewal discussions\n\n### 5. Compact\n- Minimal format\n- Single page if possible\n- For: email attachment\n\n[Created from: ultrathink - EPIC-V2-PDF subtask]",
  "labels": [
    "v2",
    "pdf",
    "templates",
    "design"
  ]
}
{
  "id": "quotey-007-2",
  "title": "TASK: Implement template engine with branding",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:39:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:39:00Z",
  "parent": "quotey-007",
  "description": "## Overview\nImplement template system with customizable branding.\n\n## Why This Matters\nEnables white-label and customization.\n\n## Branding Options\n- Logo upload (PNG/JPG, stored in SQLite)\n- Primary color (for headers, accents)\n- Secondary color\n- Company name\n- Company address\n- Contact info\n- Footer text\n\n## Storage\n- Logo stored as base64 in config\n- Colors stored in quotey.toml or DB\n- Per-template overrides possible\n\n[Created from: ultrathink - EPIC-V2-PDF subtask]",
  "labels": [
    "v2",
    "pdf",
    "implementation",
    "branding"
  ]
}
{
  "id": "quotey-007-3",
  "title": "TASK: Implement logo upload UI",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:40:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:40:00Z",
  "parent": "quotey-007",
  "description": "## Overview\nAdd Slack UI for uploading and managing logos.\n\n## Why This Matters\nUser-facing. Admins need to set branding.\n\n## Slack Command\n```\n/quotey branding\n\nâ†’ Opens modal with:\n- Current logo preview\n- Upload new logo\n- Color pickers\n- Live preview\n- Save button\n```\n\n[Created from: ultrathink - EPIC-V2-PDF subtask]",
  "labels": [
    "v2",
    "pdf",
    "ui",
    "branding",
    "slack"
  ]
}
{
  "id": "quotey-007-4",
  "title": "TASK: Add white-label option",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:41:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:41:00Z",
  "parent": "quotey-007",
  "description": "## Overview\nAdd option to remove all Quotey branding for partners/resellers.\n\n## Why This Matters\nEnables white-label for partners.\n\n## White-Label Features\n- Remove \"Generated by Quotey\" footer\n- Custom sender name\n- Custom support contact\n- Custom terms footer\n\n[Created from: ultrathink - EPIC-V2-PDF subtask]",
  "labels": [
    "v2",
    "pdf",
    "whitelabel",
    "partner"
  ]
}
{
  "id": "quotey-008-1",
  "title": "TASK: Design PWA architecture",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:42:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:42:00Z",
  "parent": "quotey-008",
  "description": "## Overview\nDesign Progressive Web App architecture for mobile approvals.\n\n## Why This Matters\nFoundation. How PWA connects to Quotey?\n\n## Architecture\n- Static HTML/JS/CSS served from Quotey\n- API calls back to Quotey for data\n- Service worker for offline\n- Web App Manifest\n\n## URL Structure\n- `/approvals` - List pending\n- `/approvals/:id` - Detail view\n- `/settings` - Preferences\n\n## Tech Stack\n- Vanilla JS (no framework for simplicity)\n- Tailwind CSS (lightweight)\n- Service worker for offline\n\n[Created from: ultrathink - EPIC-V2-MOBILE subtask]",
  "labels": [
    "v2",
    "mobile",
    "pwa",
    "architecture"
  ]
}
{
  "id": "quotey-008-2",
  "title": "TASK: Implement approval list view",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:43:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:43:00Z",
  "parent": "quotey-008",
  "description": "## Overview\nImplement the main approval list view.\n\n## Why This Matters\nUser sees pending approvals at a glance.\n\n## UI\n```\nðŸ“‹ Pending Approvals (3)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nAcme Corp - $21,420\n15% discount â€¢ 62% margin\n2 hours ago\n\n[ View ]\n\nTechCorp - $45,000\n20% discount â€¢ 58% margin\n5 hours ago\n\n[ View ]\n```\n\n[Created from: ultrathink - EPIC-V2-MOBILE subtask]",
  "labels": [
    "v2",
    "mobile",
    "ui",
    "approvals"
  ]
}
{
  "id": "quotey-008-3",
  "title": "TASK: Implement approval detail view",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:44:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:44:00Z",
  "parent": "quotey-008",
  "description": "## Overview\nImplement full approval detail with context.\n\n## Why This Matters\nManager needs all info to decide.\n\n## Data Shown\n- Customer info and history\n- Quote details (lines, pricing)\n- Discount impact\n- Margin analysis\n- Competitive context\n- Justification from rep\n- Similar deals\n\n## Actions\n- Approve (one tap)\n- Reject (with reason)\n- Need Info (asks rep)\n- Snooze (remind later)\n\n[Created from: ultrathink - EPIC-V2-MOBILE subtask]",
  "labels": [
    "v2",
    "mobile",
    "ui",
    "detail"
  ]
}
{
  "id": "quotey-008-4",
  "title": "TASK: Add push notifications",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:45:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:45:00Z",
  "parent": "quotey-008",
  "description": "## Overview\nImplement push notifications for new approvals.\n\n## Why This Matters\nCritical. Manager needs to know immediately.\n\n## Implementation\n- Use Web Push API\n- Subscribe on first visit\n- Push from Quotey when approval requested\n- Notification content: customer, amount, discount\n- Deep link to approval detail\n\n[Created from: ultrathink - EPIC-V2-MOBILE subtask]",
  "labels": [
    "v2",
    "mobile",
    "notifications",
    "push"
  ]
}
{
  "id": "quotey-008-5",
  "title": "TASK: Add biometric authentication",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:46:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:46:00Z",
  "parent": "quotey-008",
  "description": "## Overview\nAdd FaceID/TouchID support for quick authentication.\n\n## Why This Matters\nConvenience. One tap to authenticate.\n\n## Implementation\n- Use Web Authentication API\n- Register on first use\n- Prompt on each approval action\n- Fallback to password\n\n[Created from: ultrathink - EPIC-V2-MOBILE subtask]",
  "labels": [
    "v2",
    "mobile",
    "security",
    "biometric"
  ]
}
{
  "id": "quotey-009-1",
  "title": "TASK: Design analytics metrics and dimensions",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:47:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:47:00Z",
  "parent": "quotey-009",
  "description": "## Overview\nDefine the metrics and dimensions for the analytics dashboard.\n\n## Why This Matters\nFoundation. What are we measuring?\n\n## Metrics\n\n### Pricing Health\n- Average discount by segment\n- Average discount by rep\n- Discount distribution (% in each bucket)\n- Average margin by product\n- Margin distribution\n\n### Velocity\n- Quote creation to close (days)\n- Quote age (in flight)\n- Approval turnaround time\n- Time by stage\n\n### Products\n- Quote count by product\n- Attach rate (bundles/add-ons)\n- Popular bundles\n\n### Approvals\n- Approval rate\n- Rejection rate\n- Auto-approval rate\n- Bottleneck analysis (who delays)\n\n### Deals\n- Deal size distribution\n- Win rate by price range\n- Win rate by segment\n\n## Dimensions\n- Date (week, month, quarter, year)\n- Segment (SMB, Mid-Market, Enterprise)\n- Region (US, EU, APAC)\n- Rep\n- Product category\n\n[Created from: ultrathink - EPIC-V2-ANALYTICS subtask]",
  "labels": [
    "v2",
    "analytics",
    "metrics",
    "design"
  ]
}
{
  "id": "quotey-009-2",
  "title": "TASK: Implement analytics queries",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:48:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:48:00Z",
  "parent": "quotey-009",
  "description": "## Overview\nImplement SQL queries for analytics metrics.\n\n## Why This Matters\nCore implementation. Powers the dashboard.\n\n## Query Types\n- Aggregations (SUM, AVG, COUNT)\n- Grouping (by segment, rep, product)\n- Time series (trends over time)\n- Percentiles (distribution)\n- Comparisons (current vs previous period)\n\n## Performance\n- Pre-compute daily aggregates\n- Cache query results\n- Background refresh hourly\n\n[Created from: ultrathink - EPIC-V2-ANALYTICS subtask]",
  "labels": [
    "v2",
    "analytics",
    "queries",
    "sql"
  ]
}
{
  "id": "quotey-009-3",
  "title": "TASK: Build analytics dashboard UI",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:49:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:49:00Z",
  "parent": "quotey-009",
  "description": "## Overview\nBuild the analytics dashboard UI.\n\n## Why This Matters\nUser-facing. How users see the data.\n\n## Sections\n1. **Summary cards**: Key metrics at a glance\n2. **Pricing charts**: Discount and margin trends\n3. **Velocity**: Quote timing\n4. **Products**: Popular items\n5. **Approvals**: Bottlenecks\n\n## Tech\n- Embedded in Quotey (Axum)\n- Chart.js for visualizations\n- Responsive design\n- Slack link to open dashboard\n\n[Created from: ultrathink - EPIC-V2-ANALYTICS subtask]",
  "labels": [
    "v2",
    "analytics",
    "ui",
    "dashboard"
  ]
}
{
  "id": "quotey-009-4",
  "title": "TASK: Add export and scheduling",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:50:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:50:00Z",
  "parent": "quotey-009",
  "description": "## Overview\nAdd CSV export and email digest scheduling.\n\n## Why This Matters\nConsumption. Users want data in other formats.\n\n## Export\n- CSV export for all tables\n- Date range selection\n- Column selection\n\n## Scheduling\n- Weekly email digest\n- Configurable day/time\n- Include key metrics\n- Link to dashboard\n\n[Created from: ultrathink - EPIC-V2-ANALYTICS subtask]",
  "labels": [
    "v2",
    "analytics",
    "export",
    "scheduling"
  ]
}
{
  "id": "quotey-010-1",
  "title": "TASK: Implement Salesforce OAuth flow",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:51:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:51:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nImplement one-click OAuth connection to Salesforce.\n\n## Why This Matters\nCore integration. Enables Salesforce sync.\n\n## OAuth Flow\n1. User clicks \"Connect Salesforce\"\n2. Redirect to Salesforce OAuth\n3. User approves\n4. Callback with auth code\n5. Exchange for access token\n6. Store tokens securely\n7. Test connection\n\n## Implementation\n- Use existing Composio integration\n- Or direct Salesforce OAuth\n- Store: access_token, refresh_token, instance_url\n- Token refresh handling\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "salesforce",
    "oauth"
  ]
}
{
  "id": "quotey-010-2",
  "title": "TASK: Implement HubSpot OAuth flow",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:52:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:52:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nImplement one-click OAuth connection to HubSpot.\n\n## Why This Matters\nCore integration. Enables HubSpot sync.\n\n## OAuth Flow\nSame pattern as Salesforce\n- Redirect to HubSpot OAuth\n- User approves\n- Store tokens\n- Test connection\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "hubspot",
    "oauth"
  ]
}
{
  "id": "quotey-010-3",
  "title": "TASK: Implement quote sync (Quotey â†’ CRM)",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:53:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:53:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nSync quotes from Quotey to CRM.\n\n## Why This Matters\nCore sync. Keeps CRM up to date.\n\n## Events to Sync\n- Quote created â†’ Create opportunity\n- Quote finalized â†’ Update amount, stage\n- Quote approved â†’ Post approval\n- Quote rejected â†’ Post rejection\n- Quote expired â†’ Update stage\n\n## Implementation\n- Webhook: real-time sync\n- Fallback: batch sync hourly\n- Conflict resolution: Quotey wins\n- Error handling with retry\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "sync",
    "implementation"
  ]
}
{
  "id": "quotey-010-4",
  "title": "TASK: Implement account sync (CRM â†’ Quotey)",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T11:54:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:54:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nSync account data from CRM to Quotey.\n\n## Why This Matters\nKeeps Quotey data fresh.\n\n## Events to Sync\n- Account updated â†’ Sync to Quotey\n- Contact added â†’ Sync to Quotey\n- Opportunity stage changed â†’ Update quote context\n\n## Implementation\n- Webhook: real-time\n- Polling fallback\n- Deduplication by CRM ID\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "sync",
    "implementation"
  ]
}
{
  "id": "quotey-010-5",
  "title": "TASK: Implement field mapping UI",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:55:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:55:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nAllow users to configure field mapping between Quotey and CRM.\n\n## Why This Matters\nFlexibility. Different CRMs have different fields.\n\n## UI\n```\n/quotey crm mapping\n\nQuotey â†’ CRM:\nquote.total â†’ Opportunity.Amount\nquote.discount â†’ Opportunity.Discount\n\nCRM â†’ Quotey:\nAccount.Industry â†’ account.industry\n```\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "mapping",
    "ui"
  ]
}
{
  "id": "quotey-010-6",
  "title": "TASK: Add sync monitoring and error handling",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T11:56:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T11:56:00Z",
  "parent": "quotey-010",
  "description": "## Overview\nAdd monitoring, alerting, and error handling for CRM sync.\n\n## Why This Matters\nReliability. Need to know when sync fails.\n\n## Features\n- Sync status in Slack\n- Error alerts\n- Retry with backoff\n- Manual retry button\n- Sync history log\n\n[Created from: ultrathink - EPIC-V2-CRM subtask]",
  "labels": [
    "v2",
    "crm",
    "monitoring",
    "reliability"
  ]
}
{
  "id": "quotey-099-1",
  "title": "TASK: Add web server for portal/dashboard/PWA",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T12:00:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T12:00:00Z",
  "description": "## Overview\nAdd web server capability to Quotey for serving portal, dashboard, and PWA.\n\n## Why This Matters\nSeveral v2 features require web UI: Portal, Analytics, Mobile PWA. Need a common web server.\n\n## Implementation\n- Add Axum web server to Quotey\n- Serve static files\n- API endpoints for each feature\n- Configurable port (default 3847)\n- TLS support for production\n- Rate limiting\n\n## Dependencies\n- EPIC-V2-PORTAL\n- EPIC-V2-ANALYTICS\n- EPIC-V2-MOBILE\n\n[Created from: ultrathink - cross-cutting infrastructure]",
  "labels": [
    "v2",
    "infrastructure",
    "web",
    "axum"
  ]
}
{
  "id": "quotey-099-2",
  "title": "TASK: Design unified authentication system",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T12:01:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T12:01:00Z",
  "description": "## Overview\nDesign unified auth system for all v2 features (portal, MCP, mobile).\n\n## Why This Matters\nMultiple features need auth. Should be consistent.\n\n## Auth Types\n1. **MCP**: API key\n2. **Portal**: Token-based (link + optional password)\n3. **Mobile PWA**: OAuth (Slack) + optional biometric\n\n## Design\n- Unified token management\n- Consistent error responses\n- Audit logging\n- Token revocation\n\n[Created from: ultrathink - cross-cutting infrastructure]",
  "labels": [
    "v2",
    "security",
    "auth",
    "design"
  ]
}
{
  "id": "quotey-099-3",
  "title": "TASK: Performance optimization for scale",
  "status": "open",
  "priority": 3,
  "issue_type": "task",
  "created_at": "2026-02-26T12:02:00Z",
  "created_by": "ubuntuman",
  "updated_at": "2026-02-26T12:02:00Z",
  "description": "## Overview\nOptimize performance for handling larger data volumes.\n\n## Why This Matters\nv1 optimized for small scale. v2 features add load.\n\n## Areas\n- Query optimization (indexes, caching)\n- Background job processing\n- Rate limiting\n- Resource cleanup\n\n[Created from: ultrathink - cross-cutting infrastructure]",
  "labels": [
    "v2",
    "performance",
    "optimization"
  ]
}
{
  "id": "quotey-101",
  "title": "EPIC-ARCH: Product Catalog Structure Overhaul",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:00:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:00:00Z",
  "description": "Flat product model lacks hierarchical families, configurable attributes, and option groups. Need ProductAttribute, ProductFamily, OptionGroup, ProductRelationship types, SQLite schema, SqlProductRepository with JOINs, and enriched in-memory Catalog with secondary indexes.",
  "labels": [
    "arch",
    "catalog",
    "epic"
  ]
}
{
  "id": "quotey-101-1",
  "title": "TASK: Extend Product domain model with attributes/families/options",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:01:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:01:00Z",
  "parent": "quotey-101",
  "description": "Add ProductAttribute, ProductFamily, OptionGroup, and ProductRelationship types to crates/core/src/domain/product.rs.",
  "labels": [
    "arch",
    "catalog",
    "domain"
  ]
}
{
  "id": "quotey-101-2",
  "title": "TASK: Create SQLite schema for product structure",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:02:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:02:00Z",
  "parent": "quotey-101",
  "description": "Migration for product_attribute, product_family, option_group, option_choice, and product_relationship tables.",
  "labels": [
    "arch",
    "catalog",
    "schema",
    "migration"
  ]
}
{
  "id": "quotey-101-3",
  "title": "TASK: Implement SqlProductRepository with JOINs",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:03:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:03:00Z",
  "parent": "quotey-101",
  "description": "Replace stub with full CRUD and list_all() using JOINs to avoid N+1 queries.",
  "labels": [
    "arch",
    "catalog",
    "repository"
  ]
}
{
  "id": "quotey-101-4",
  "title": "TASK: Enrich Catalog with secondary indexes",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:04:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:04:00Z",
  "parent": "quotey-101",
  "description": "Add secondary indexes to in-memory Catalog for O(1) lookup by family and attribute.",
  "labels": [
    "arch",
    "catalog",
    "performance"
  ]
}
{
  "id": "quotey-102",
  "title": "EPIC-ARCH: Constraint Engine Evolution",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:05:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:05:00Z",
  "description": "Constraint engine only validates data hygiene (empty quotes, zero quantity). Needs dependency/exclusion rules, forward-checking, constraint propagation, and suggestion generation.",
  "labels": [
    "arch",
    "constraints",
    "epic"
  ]
}
{
  "id": "quotey-102-1",
  "title": "TASK: Define constraint rule domain model",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:06:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:06:00Z",
  "parent": "quotey-102",
  "description": "Create ConstraintType enum (Requires, Excludes, Cardinality, AttributeMatch) and ConstraintRule struct in crates/core/src/cpq/constraints.rs.",
  "labels": [
    "arch",
    "constraints",
    "domain"
  ]
}
{
  "id": "quotey-102-2",
  "title": "TASK: Create constraint rules SQLite schema",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:07:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:07:00Z",
  "parent": "quotey-102",
  "description": "Migration for constraint_rule table with seed data (e.g., Enterprise Plan requires SSO).",
  "labels": [
    "arch",
    "constraints",
    "schema",
    "migration"
  ]
}
{
  "id": "quotey-102-3",
  "title": "TASK: Implement DatabaseConstraintEngine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:08:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:08:00Z",
  "parent": "quotey-102",
  "description": "Load rules from SQLite and evaluate against quotes, preserving existing hygiene checks.",
  "labels": [
    "arch",
    "constraints",
    "engine"
  ]
}
{
  "id": "quotey-102-4",
  "title": "TASK: Implement constraint propagation (valid_additions)",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:09:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:09:00Z",
  "parent": "quotey-102",
  "description": "Add valid_additions() to compute what products are still valid to add given current selections via forward-checking.",
  "labels": [
    "arch",
    "constraints",
    "propagation"
  ]
}
{
  "id": "quotey-102-5",
  "title": "TASK: Implement constraint suggestion generator",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:10:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:10:00Z",
  "parent": "quotey-102",
  "description": "Generate structured ConstraintSuggestion objects (Add/Remove/Replace) for the agent to present in Slack.",
  "labels": [
    "arch",
    "constraints",
    "suggestions",
    "ux"
  ]
}
{
  "id": "quotey-103",
  "title": "EPIC-ARCH: Pricing Engine Pipeline",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:11:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:11:00Z",
  "description": "Pricing engine is a simple multiplication operator (unit_price * quantity). Needs composable pipeline with price books, volume tiers, graduated pricing, formulas, and discount stacking.",
  "labels": [
    "arch",
    "pricing",
    "epic"
  ]
}
{
  "id": "quotey-103-1",
  "title": "TASK: Define pricing rule domain model",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:12:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:12:00Z",
  "parent": "quotey-103",
  "description": "Create PriceBook, VolumeTier, DiscountRule, and PricingFormula types in crates/core/src/cpq/pricing.rs.",
  "labels": [
    "arch",
    "pricing",
    "domain"
  ]
}
{
  "id": "quotey-103-2",
  "title": "TASK: Create pricing rules SQLite schema",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:13:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:13:00Z",
  "parent": "quotey-103",
  "description": "Migration for price_book, volume_tier, discount_rule, pricing_formula tables with seed data.",
  "labels": [
    "arch",
    "pricing",
    "schema",
    "migration"
  ]
}
{
  "id": "quotey-103-3",
  "title": "TASK: Implement PricingContext and Pipeline executor",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:14:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:14:00Z",
  "parent": "quotey-103",
  "description": "Define PricingStage trait and PricingPipeline executor to process stages sequentially with trace accumulation.",
  "labels": [
    "arch",
    "pricing",
    "pipeline"
  ]
}
{
  "id": "quotey-103-4",
  "title": "TASK: Implement PriceBookResolver stage",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:15:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:15:00Z",
  "parent": "quotey-103",
  "description": "Resolve unit prices based on currency, segment, and priority from price book entries.",
  "labels": [
    "arch",
    "pricing",
    "pricebook"
  ]
}
{
  "id": "quotey-103-5",
  "title": "TASK: Implement VolumeTierCalculator stage",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:16:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:16:00Z",
  "parent": "quotey-103",
  "description": "Support both Step and Graduated pricing models for volume-based discounts.",
  "labels": [
    "arch",
    "pricing",
    "volume-tiers"
  ]
}
{
  "id": "quotey-103-6",
  "title": "TASK: Implement FormulaEvaluator stage",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:17:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:17:00Z",
  "parent": "quotey-103",
  "description": "Evaluate derived pricing (e.g., Support = 18% of License) using topological sort for dependencies. Recursive descent parser supporting min/max/round functions.",
  "labels": [
    "arch",
    "pricing",
    "formulas"
  ]
}
{
  "id": "quotey-103-7",
  "title": "TASK: Implement DiscountApplicator stage",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:18:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:18:00Z",
  "parent": "quotey-103",
  "description": "Apply percentage or fixed-amount discounts with compound or additive stacking modes.",
  "labels": [
    "arch",
    "pricing",
    "discounts"
  ]
}
{
  "id": "quotey-103-8",
  "title": "TASK: Compose PipelinePricingEngine and verify isomorphism",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:19:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:19:00Z",
  "parent": "quotey-103",
  "description": "Integrate all stages into PipelinePricingEngine. Verify baseline compatibility: when no rules exist, output matches DeterministicPricingEngine.",
  "labels": [
    "arch",
    "pricing",
    "integration"
  ]
}
{
  "id": "quotey-104",
  "title": "EPIC-ARCH: Policy Engine Database-Driven",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:20:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:20:00Z",
  "description": "Policy engine has hardcoded 20%/30% discount thresholds and 10% margin floor in Rust constants. Needs database-driven versioned rules for CLO replay support.",
  "labels": [
    "arch",
    "policy",
    "epic"
  ]
}
{
  "id": "quotey-104-1",
  "title": "TASK: Define policy rule domain model with versioning",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:21:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:21:00Z",
  "parent": "quotey-104",
  "description": "Create PolicyRule and PolicyVersion types to support versioned approval thresholds.",
  "labels": [
    "arch",
    "policy",
    "domain"
  ]
}
{
  "id": "quotey-104-2",
  "title": "TASK: Create policy rules SQLite schema",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:22:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:22:00Z",
  "parent": "quotey-104",
  "description": "Migration for versioned policy rules. Seed with current hardcoded thresholds for backward compatibility.",
  "labels": [
    "arch",
    "policy",
    "schema",
    "migration"
  ]
}
{
  "id": "quotey-104-3",
  "title": "TASK: Implement DatabasePolicyEngine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:23:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:23:00Z",
  "parent": "quotey-104",
  "description": "Load active versions and evaluate rules. Return policy_version_id in decisions for audit trails.",
  "labels": [
    "arch",
    "policy",
    "engine"
  ]
}
{
  "id": "quotey-104-4",
  "title": "TASK: Add policy replay support for CLO",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:24:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:24:00Z",
  "parent": "quotey-104",
  "description": "Add compare_replay() to test candidate policies against historical data for Closed-Loop Optimizer.",
  "labels": [
    "arch",
    "policy",
    "clo",
    "replay"
  ]
}
{
  "id": "quotey-105",
  "title": "EPIC-ARCH: Agent Conversation Layer (Structured Slot-Filling)",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:25:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:25:00Z",
  "description": "Agent intent classification is keyword-based (.contains matching). Needs structured slot-filling state machine, LLM extraction pipeline, and flow engine integration.",
  "labels": [
    "arch",
    "agent",
    "conversation",
    "epic"
  ]
}
{
  "id": "quotey-105-1",
  "title": "TASK: Define slot-filling state machine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:26:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:26:00Z",
  "parent": "quotey-105",
  "description": "Create SlotSchema, SlotDefinition, and SlotState types to track gathered fields for structured quote building.",
  "labels": [
    "arch",
    "agent",
    "slots",
    "domain"
  ]
}
{
  "id": "quotey-105-2",
  "title": "TASK: Implement structured extraction pipeline",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:27:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:27:00Z",
  "parent": "quotey-105",
  "description": "Pipeline: raw_text â†’ LLM extraction â†’ schema validation â†’ slot delta. Replaces keyword matching.",
  "labels": [
    "arch",
    "agent",
    "extraction",
    "llm"
  ]
}
{
  "id": "quotey-105-3",
  "title": "TASK: Connect slot machine to flow engine",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:28:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:28:00Z",
  "parent": "quotey-105",
  "description": "Bridge slot state to FlowContext.missing_required_fields to drive deterministic flow transitions.",
  "labels": [
    "arch",
    "agent",
    "flow-engine",
    "integration"
  ]
}
{
  "id": "quotey-106",
  "title": "EPIC-ARCH: Similarity Index (LSH)",
  "status": "open",
  "priority": 2,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:29:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:29:00Z",
  "description": "Similarity search is O(n) brute-force scan over all candidates. Needs Locality-Sensitive Hashing (LSH) band partitioning for sub-linear candidate filtering at scale.",
  "labels": [
    "arch",
    "dna",
    "lsh",
    "performance",
    "epic"
  ]
}
{
  "id": "quotey-106-1",
  "title": "TASK: Implement LSH band partitioning",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:30:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:30:00Z",
  "parent": "quotey-106",
  "description": "Partition 128-bit SimHash fingerprints into bands (e.g., 8 bands Ã— 16 bits) for probabilistic candidate filtering.",
  "labels": [
    "arch",
    "dna",
    "lsh",
    "algorithm"
  ]
}
{
  "id": "quotey-106-2",
  "title": "TASK: Create LSH bucket SQLite schema",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:31:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:31:00Z",
  "parent": "quotey-106",
  "description": "Migration for dna_lsh_bucket table to store persistent band hashes for indexed similarity search.",
  "labels": [
    "arch",
    "dna",
    "lsh",
    "schema",
    "migration"
  ]
}
{
  "id": "quotey-106-3",
  "title": "TASK: Integrate LSH with SimilarityEngine",
  "status": "open",
  "priority": 2,
  "issue_type": "task",
  "created_at": "2026-02-26T15:32:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:32:00Z",
  "parent": "quotey-106",
  "description": "Use LSH as probabilistic pre-filter in find_similar() to reduce candidate set before exact Hamming distance computation.",
  "labels": [
    "arch",
    "dna",
    "lsh",
    "integration"
  ]
}
{
  "id": "quotey-107",
  "title": "EPIC-ARCH: Server Wiring and Integration",
  "status": "open",
  "priority": 1,
  "issue_type": "epic",
  "created_at": "2026-02-26T15:33:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:33:00Z",
  "description": "Components are independently correct but not fully wired in bootstrap. Some repositories return not-implemented errors. Need ServiceContainer composition and end-to-end lifecycle test.",
  "labels": [
    "arch",
    "server",
    "wiring",
    "epic"
  ]
}
{
  "id": "quotey-107-1",
  "title": "TASK: Implement service composition in bootstrap",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:34:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:34:00Z",
  "parent": "quotey-107",
  "description": "Wire engines to repositories in crates/server/src/bootstrap.rs using a ServiceContainer. Connect PricingEngine, ConstraintEngine, PolicyEngine, Catalog, and repositories.",
  "labels": [
    "arch",
    "server",
    "bootstrap",
    "integration"
  ]
}
{
  "id": "quotey-107-2",
  "title": "TASK: End-to-end integration test for full quote lifecycle",
  "status": "open",
  "priority": 1,
  "issue_type": "task",
  "created_at": "2026-02-26T15:35:00Z",
  "created_by": "agent",
  "updated_at": "2026-02-26T15:35:00Z",
  "parent": "quotey-107",
  "description": "Integration test exercising complete quote lifecycle: create â†’ configure â†’ price â†’ validate constraints â†’ evaluate policy â†’ finalize â†’ generate PDF.",
  "labels": [
    "arch",
    "server",
    "e2e",
    "testing"
  ]
}
